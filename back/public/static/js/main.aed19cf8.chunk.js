(window.webpackJsonpfront=window.webpackJsonpfront||[]).push([[0],{42:function(e,t,a){e.exports=a(72)},47:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(35),i=a.n(r),c=(a(47),a(6)),l=a(7),s=a(9),p=a(8),h=a(10),m=(a(48),a(49),a(74)),u=a(12),d=a(75),f=(a(50),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).inputChanged=function(e){var t=e.currentTarget.files;if(t&&t[0]){var n=new FileReader;n.onload=function(e){return a.props.onSelect(t[0],e.target.result)},n.readAsDataURL(t[0])}},a.checkImage=function(e){return 0!==e.length},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(m.a,{className:"pickImage",elevation:u.a.TWO},o.a.createElement("h3",null,"Pick an image of dimensions 1024 x 1024 : "),o.a.createElement("div",{className:"pickFileInput"},o.a.createElement(d.a,{text:"Choose image...",onInputChange:this.inputChanged})))}}]),t}(n.Component)),g=a(36),v=(a(51),a(76)),C=a(21),b=(a(52),{errorImg:"Error loading image",invalidImg:"Image doesn't have 1024 x 1024 dimension"}),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={},a.loadedPic=function(e){var t=e.target;1024===t.naturalWidth&&1024===t.naturalHeight?a.setState({validImage:!0}):a.setState({error:b.invalidImg})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(m.a,{className:"pic_container"},o.a.createElement("div",{className:"backBtn"},o.a.createElement(v.a,{className:"bp3-minimal",icon:o.a.createElement(C.a,{icon:"arrow-left",iconSize:C.a.SIZE_LARGE}),onClick:this.props.goBack})),o.a.createElement("img",{className:"lepic",onLoad:this.loadedPic,src:this.props.filePath,alt:""}),o.a.createElement("div",{className:"confirmErrorMsg"},this.state.validImage&&o.a.createElement(v.a,{text:"Crop",onClick:this.props.toCropMode,className:"bp3-fill bp3-intent-primary"}),this.state.error&&o.a.createElement("h4",null,this.state.error)))}}]),t}(n.Component),w=a(19),y=a(37),E=a.n(y),O=(a(53),a(54),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).modes={horizontal:{height:755,width:450},vertical:{height:365,width:450},horizontalSmall:{height:365,width:212},gallery:{height:380,width:380}},a.types=["horizontal","vertical","horizontalSmall","gallery"],a.state={onType:0,crop:{unit:"px"},picked:{}},a.updateCrop=function(){var e=a.state.crop;e.height=a.modes[a.types[a.state.onType]].height,e.width=a.modes[a.types[a.state.onType]].width,a.setState({crop:e},a.cropComplete.bind(Object(w.a)(a),a.state.crop))},a.cropClicked=function(){a.setState((function(e){var t=e.picked,n=e.onType;return t[a.types[n]]={x:e.crop.x,y:e.crop.y},3===n?(a.props.cropComplete(t),e):{picked:t,onType:n+1}}),a.updateCrop)},a.backClicked=function(){a.setState((function(e){return{onType:e.onType-1}}),a.updateCrop)},a.cropComplete=function(e){a.imageRef&&e.width&&e.height&&a.getCroppedImg(a.imageRef,e,"ok.jpeg").then((function(e){return a.setState({croppedImageUrl:e})}))},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updateCrop()}},{key:"getCroppedImg",value:function(e,t,a){var n=this,o=document.createElement("canvas"),r=e.naturalWidth/e.width,i=e.naturalHeight/e.height;return o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(e,t.x*r,t.y*i,t.width*r,t.height*i,0,0,t.width,t.height),new Promise((function(e,t){o.toBlob((function(t){t?(t.name=a,window.URL.revokeObjectURL(n.fileUrl),n.fileUrl=window.URL.createObjectURL(t),e(n.fileUrl)):console.error("Canvas is empty")}),"image/jpeg")}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"cropperDiv"},o.a.createElement(E.a,{src:this.props.filePath,onChange:function(t){return e.setState({crop:t})},onComplete:this.cropComplete,onImageLoaded:function(t){return e.imageRef=t},crop:this.state.crop,locked:!0}),o.a.createElement("div",{className:"previewDiv"},this.state.croppedImageUrl&&o.a.createElement("div",{className:"cropImg"},o.a.createElement("img",{src:this.state.croppedImageUrl})),o.a.createElement(v.a,{text:"Crop",onClick:this.cropClicked}),o.a.createElement(v.a,{text:"Back",onClick:this.backClicked})))}}]),t}(n.Component)),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={cropMode:!1},a.toCropMode=function(){a.setState({cropMode:!0})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.cropMode?o.a.createElement(O,{filePath:this.props.filePath,cropComplete:this.props.cropComplete}):o.a.createElement(k,{goBack:this.props.goBack,filePath:this.props.filePath,toCropMode:this.toCropMode})}}]),t}(n.Component),S=a(38),I=a.n(S),N=function(e,t){var a=new FormData;return a.append("image",e),a.append("dims",JSON.stringify(t)),I.a.post("https://localhost:3004/imageData",a).catch((function(e){throw e})).then((function(e){if(200===e.status)return e.data.links}))},U=(a(71),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"imageGrid"},this.props.data.map((function(e){return o.a.createElement("a",{href:e,target:"_blank"},o.a.createElement("img",{src:e,alt:""}))})))}}]),t}(n.Component)),P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={fileSelected:!1,loading:!1},a.getContent=function(){return a.state.loading?o.a.createElement(g.a,{size:g.a.SIZE_LARGE}):a.state.uploadComplete?o.a.createElement(U,{data:a.state.filesUploaded}):a.state.fileSelected?a.state.cropComplete?void 0:o.a.createElement(j,{goBack:a.goBack,filePath:a.state.filePath,cropComplete:a.cropComplete}):o.a.createElement(f,{onSelect:a.onSelect})},a.goBack=function(){a.setState({fileSelected:!1})},a.onSelect=function(e,t){a.setState({fileSelected:!0,filePath:t,data:e})},a.cropComplete=function(e){a.setState({cropComplete:!0,loading:!0}),N(a.state.data,e).then((function(e){a.setState({filesUploaded:e,loading:!1,uploadComplete:!0,cropComplete:!1,fileSelected:!1})})).catch((function(){}))},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(m.a,{className:"header",elevation:u.a.FOUR},"Image Cropper"),o.a.createElement("div",{className:"content"},this.getContent()))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.aed19cf8.chunk.js.map